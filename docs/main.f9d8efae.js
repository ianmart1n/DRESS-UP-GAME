parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"LqgX":[function(require,module,exports) {
"use strict";var e=Object.prototype.hasOwnProperty,t="~";function n(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,n,o,s,i){if("function"!=typeof o)throw new TypeError("The listener must be a function");var c=new r(o,s||e,i),f=t?t+n:n;return e._events[f]?e._events[f].fn?e._events[f]=[e._events[f],c]:e._events[f].push(c):(e._events[f]=c,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(t=!1)),i.prototype.eventNames=function(){var n,r,o=[];if(0===this._eventsCount)return o;for(r in n=this._events)e.call(n,r)&&o.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(n)):o},i.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,n,r,o,s,i){var c=t?t+e:e;if(!this._events[c])return!1;var f,u,a=this._events[c],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,o),!0;case 5:return a.fn.call(a.context,n,r,o,s),!0;case 6:return a.fn.call(a.context,n,r,o,s,i),!0}for(u=1,f=new Array(l-1);u<l;u++)f[u-1]=arguments[u];a.fn.apply(a.context,f)}else{var v,h=a.length;for(u=0;u<h;u++)switch(a[u].once&&this.removeListener(e,a[u].fn,void 0,!0),l){case 1:a[u].fn.call(a[u].context);break;case 2:a[u].fn.call(a[u].context,n);break;case 3:a[u].fn.call(a[u].context,n,r);break;case 4:a[u].fn.call(a[u].context,n,r,o);break;default:if(!f)for(v=1,f=new Array(l-1);v<l;v++)f[v-1]=arguments[v];a[u].fn.apply(a[u].context,f)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,n,r,o){var i=t?t+e:e;if(!this._events[i])return this;if(!n)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==n||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,u=[],a=c.length;f<a;f++)(c[f].fn!==n||o&&!c[f].once||r&&c[f].context!==r)&&u.push(c[f]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var r;return e?(r=t?t+e:e,this._events[r]&&s(this,r)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=t,i.EventEmitter=i,"undefined"!=typeof module&&(module.exports=i);
},{}],"Oe2F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.size=void 0;var e=require("pixi.js"),r=e.Loader.shared.resources.config.data.size;exports.size=r;
},{"pixi.js":"aQiP"}],"z7qd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mouse=void 0;var e=require("./size"),t={element:null,down:!1,justDown:!1,justUp:!1,pos:{x:0,y:0},delta:{x:0,y:0},prev:{x:0,y:0},mouseWheel:0,init:function(e){this.element=e,this.element.addEventListener("pointerup",t.onUp.bind(t)),this.element.addEventListener("pointerout",t.onUp.bind(t)),this.element.addEventListener("pointerdown",t.onDown.bind(t)),this.element.addEventListener("pointermove",t.onMove.bind(t)),this.element.addEventListener("wheel",t.onWheel.bind(t)),this.element.addEventListener("DOMMouseScroll",t.onWheel.bind(t))},update:function(){this.justDown=!1,this.justUp=!1,this.mouseWheel=0,this.prev.x=this.pos.x,this.prev.y=this.pos.y,this.delta.x=0,this.delta.y=0},onDown:function(e){!0!==this.down&&(this.down=!0,this.justDown=!0),this.onMove(e)},onUp:function(e){this.down=!1,this.justDown=!1,this.justUp=!0,this.onMove(e)},onMove:function(t){this.pos.x=t.offsetX/this.element.clientWidth*e.size.x,this.pos.y=t.offsetY/this.element.clientHeight*e.size.y,this.delta.x=this.pos.x-this.prev.x,this.delta.y=this.pos.y-this.prev.y},onWheel:function(e){var t;this.mouseWheel=Math.sign(e.deltaY||(null===(t=e.originalEvent)||void 0===t?void 0:t.wheelDelta)||0),e.preventDefault()},isDown:function(){return this.down},isUp:function(){return!this.isDown()},isJustDown:function(){return this.justDown},isJustUp:function(){return this.justUp},getWheelDir:function(){return Math.sign(this.mouseWheel)}};exports.mouse=t;
},{"./size":"Oe2F"}],"UldJ":[function(require,module,exports) {
"use strict";function e(e,t,r){return Math.abs(t-e)<1e-7?t:e+(t-e)*r}function t(e,t,r){return Math.max(e,Math.min(t,r))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lerp=e,exports.clamp=t;
},{}],"kw9d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Interactive=void 0;var e=require("eventemitter3"),t=require("pixi.js"),r=require("./input-mouse"),s=require("./size"),i=require("./utils");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=h();return function(){var r,s=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(s,arguments,i)}else r=s.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(n){a(l,e.EventEmitter);var c=p(l);function l(e){var r,i=e.spr,n=e.x,u=e.y,a=e.scale;o(this,l),(r=c.call(this)).v={x:0,y:0},r.angle=0,r.selectAnim=-1,r.selected=!1,r.disposable=!0,r.bad=!1,r.scale=a||1;var p=new t.Sprite(t.Loader.shared.resources[i].texture);return p.anchor.x=p.anchor.y=.5,p.x=(n||0)*s.size.x,p.y=(u||0)*s.size.y,p.scale.x=p.scale.y=r.scale,r.spr=p,i.includes("bad")&&(r.bad=!0),l.interactives.push(y(r)),r.id=l.interactives.length,r}return u(l,[{key:"update",value:function(e){this.spr.x+=this.v.x,this.spr.y+=this.v.y,this.spr.angle=(0,i.lerp)(this.spr.angle,this.angle,.1),this.selected?(this.v.x=(0,i.lerp)(this.v.x,0,.5),this.v.y=(0,i.lerp)(this.v.y,0,.5)):(this.v.x=(0,i.lerp)(this.v.x,0,.1),this.v.y=(0,i.lerp)(this.v.y,0,.1)),this.spr.scale.x=(0,i.lerp)(this.spr.scale.x,this.scale+.3*Math.sin(e/50+this.id)*(1-Math.abs(this.selectAnim)),.5),this.spr.scale.y=(0,i.lerp)(this.spr.scale.y,this.scale+.3*Math.cos(e/50+this.id)*(1-Math.abs(this.selectAnim)),.5),this.spr.skew.x=(0,i.lerp)(this.spr.skew.x,this.v.x/40,.1),this.spr.skew.y=(0,i.lerp)(this.spr.skew.y,this.v.y/40,.1),this.selected||(this.selectAnim=(0,i.lerp)(this.selectAnim,-1,.2))}},{key:"underMouse",value:function(){return this.spr.getBounds(!0).contains(r.mouse.pos.x,r.mouse.pos.y)}},{key:"onClick",value:function(){this.emit("click")}},{key:"onRelease",value:function(){this.emit("release")}}],[{key:"updateAll",value:function(e){for(var t=this,i=function(r){var i=l.interactives[r];i.update(e),i.spr.x<0&&(i.v.x-=i.disposable?1:-1),i.spr.x>s.size.x&&(i.v.x+=i.disposable?1:-1),i.spr.y<0&&(i.v.y-=i.disposable?1:-1),i.spr.y>s.size.y&&(i.v.y+=i.disposable?1:-1),i.disposable&&(i.spr.x<-s.size.x||i.spr.x>2*s.size.x||i.spr.y<-s.size.y||i.spr.y>2*s.size.y)&&(i.spr.destroy(),t.interactives.splice(t.interactives.findIndex(function(e){return e===i}),1))},n=l.interactives.length-1;n>=0;--n)i(n);l.target&&(l.target.spr.tint=16777215),l.selected?r.mouse.isJustUp()&&l.selected.onRelease():(l.target=l.interactives.find(function(e){return e.underMouse()}),l.target&&(l.target.spr.tint=6710886),r.mouse.isJustDown()&&l.target&&l.target.onClick())}}]),l}();exports.Interactive=d,d.selected=null,d.target=null,d.interactives=[];
},{"eventemitter3":"LqgX","pixi.js":"aQiP","./input-mouse":"z7qd","./size":"Oe2F","./utils":"UldJ"}],"hBTp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Button=void 0;var t=require("pixi.js"),e=require("./Interactive");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=a();return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return i(this,r)}}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(r){o(i,e.Interactive);var c=u(i);function i(e){var r;n(this,i);for(var o=arguments.length,u=new Array(o>1?o-1:0),f=1;f<o;f++)u[f-1]=arguments[f];return(r=c.call.apply(c,[this].concat(u))).addListener("click",function(){t.Loader.shared.resources.btn.data.play(),r.selectAnim=1,e()}),r}return i}();exports.Button=l;
},{"pixi.js":"aQiP","./Interactive":"kw9d"}],"wkQh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ItemAnimated=void 0;var e=require("pixi.js");function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var t=function t(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r(this,t);var i=new e.AnimatedSprite(a.map(function(r){return e.Loader.shared.resources[r].texture}));i.anchor.x=i.anchor.y=.5,i.animationSpeed=n/e.Ticker.shared.FPS,i.play(),this.spr=i};exports.ItemAnimated=t;
},{"pixi.js":"aQiP"}],"pEBc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ItemDraggable=void 0;var e=require("pixi.js"),t=require("./input-mouse"),r=require("./Interactive"),n=require("./utils");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=v();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(o){f(a,r.Interactive);var c=p(a);function a(n){var o;return i(this,a),(o=c.call(this,n)).addListener("click",function(){r.Interactive.selected=d(o),r.Interactive.interactives.splice(r.Interactive.interactives.findIndex(function(e){return e===d(o)}),1),r.Interactive.interactives.unshift(d(o)),r.Interactive.selected.spr.parent.addChildAt(r.Interactive.selected.spr,r.Interactive.selected.spr.parent.children.length),a.offset.x=t.mouse.pos.x-r.Interactive.selected.spr.x,a.offset.y=t.mouse.pos.y-r.Interactive.selected.spr.y,e.Loader.shared.resources.pickup.data.play()}),o.addListener("release",function(){e.Loader.shared.resources.drop.data.play(),r.Interactive.selected.selected=!1,r.Interactive.selected=null}),o}return u(a,[{key:"drag",value:function(){this.selected=!0,this.v.x+=(t.mouse.pos.x-this.spr.x-a.offset.x)/4,this.v.y+=(t.mouse.pos.y-this.spr.y-a.offset.y)/4,this.angle+=15*t.mouse.mouseWheel,this.selectAnim=(0,n.lerp)(this.selectAnim,1,.1)}},{key:"update",value:function(e){s(h(a.prototype),"update",this).call(this,e),r.Interactive.selected===this&&this.drag()}}]),a}();exports.ItemDraggable=b,b.dragging=null,b.target=null,b.offset={x:0,y:0};
},{"pixi.js":"aQiP","./input-mouse":"z7qd","./Interactive":"kw9d","./utils":"UldJ"}],"OADo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ItemStatic=void 0;var e=require("pixi.js"),s=require("./size");function t(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var i=function i(r){var a=r.spr,n=r.x,c=r.y,o=r.scale;t(this,i),this.bubble=!1,this.done=!1,this.name="";var u=new e.Sprite(e.Loader.shared.resources[a].texture);u.anchor.x=u.anchor.y=.5,u.x=(n||0)*s.size.x,u.y=(c||0)*s.size.y,u.scale.x=u.scale.y=o||1,this.spr=u,this.name=a,a.includes("bad")&&(this.bad=!0),a.includes("bubble")&&(this.bubble=!0),a.includes("done")&&(this.bubble=!0)};exports.ItemStatic=i;
},{"pixi.js":"aQiP","./size":"Oe2F"}],"KuvC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Layer=void 0;var t=require("pixi.js"),e=require("./size");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=s();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(r){o(u,t.Container);var c=i(u);function u(t){var r;return n(this,u),(r=c.call(this)).config=t,r.active=0,r.x=(t.x||0)*e.size.x,r.y=(t.y||0)*e.size.y,r.scale.x=r.scale.y=t.scale||1,r}return u}();exports.Layer=l;
},{"pixi.js":"aQiP","./size":"Oe2F"}],"jP6t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=S,exports.stage=void 0;var e=require("pixi.js"),r=require("./Button"),a=require("./input-mouse"),t=require("./Interactive"),i=require("./ItemAnimated"),n=require("./ItemDraggable"),o=require("./ItemStatic"),s=require("./Layer"),d=require("./loader"),l=require("./size");function u(e,r){return h(e)||b(e,r)||p(e,r)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,r){if(e){if("string"==typeof e)return v(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(e,r):void 0}}function v(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function b(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],t=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done)&&(a.push(o.value),!r||a.length!==r);t=!0);}catch(d){i=!0,n=d}finally{try{t||null==s.return||s.return()}finally{if(i)throw n}}return a}}function h(e){if(Array.isArray(e))return e}var f,m,y=new e.Container;exports.stage=y,y.filters=[];var w,g,x,C,I=[];function D(r,a,t){var i=new e.Filter(void 0,e.Loader.shared.resources[a].data,t);i.padding=0,y.filters.splice(r,1,i)}function S(){(m=(0,e.autoDetectRenderer)({width:l.size.x,height:l.size.y,antialias:!1,transparent:!1,resolution:1,clearBeforeRender:!0})).backgroundColor=0,d.resizer.appendChild(m.view),a.mouse.init(m.view),document.addEventListener("keydown",function(e){"s"===e.key&&(e.ctrlKey||e.metaKey)&&(A(),e.preventDefault(),e.stopPropagation())}),(f={spr:new e.Container,up:new e.Sprite(e.Loader.shared.resources.mouse_up.texture),over:new e.Sprite(e.Loader.shared.resources.mouse_over.texture),down:new e.Sprite(e.Loader.shared.resources.mouse_down.texture),update:n.ItemDraggable.prototype.update,drag:n.ItemDraggable.prototype.drag,v:{x:0,y:0},angle:0,selectAnim:-1,scale:1,id:0,selected:!1,underMouse:function(){return!1}}).spr.addChild(f.up),f.spr.addChild(f.over),f.spr.addChild(f.down),I.push(f.spr),f.up.anchor.x=f.up.anchor.y=f.down.anchor.x=f.down.anchor.y=f.over.anchor.x=f.over.anchor.y=.5;var c=e.Loader.shared.resources.config.data,p=new e.Container;g=0,x=!1,C=!1,w=Object.entries(c.layers).reduce(function(e,a){var d=u(a,2),l=d[0],c=d[1],v=new s.Layer(c);if("static"===c.type)c.data.items.forEach(function(e){var r=new o.ItemStatic(e);v.addChild(r.spr)}),c.data.ui&&I.push(v);else if("animated"===c.type){var b=new i.ItemAnimated(c.data.items.map(function(e){return e.spr}),c.data.speed);v.addChild(b.spr),c.data.ui&&I.push(v)}else if("drag-and-drop"===c.type)c.data.items.forEach(function(e){if(e.unique){var r=new n.ItemDraggable(e);r.disposable=!1,v.addChild(r.spr)}else{var a=new t.Interactive(e);v.addChild(a.spr),a.addListener("click",function(){var r=new n.ItemDraggable(e);v.addChild(r.spr),r.onClick()}),I.push(a.spr)}});else if("cycle"===c.type&&"bubble"===l)c.data.items.forEach(function(e){var r=new o.ItemStatic(e);r.spr.visible=!1,v.addChild(r.spr)}),v.children[0].visible=!0;else if("cycle"===c.type&&"bubble"!=l){c.data.items.forEach(function(e){var r=new o.ItemStatic(e);r.spr.visible=!1,v.addChild(r.spr)}),v.children[0].visible=!0;var h=new r.Button(function(){v.children[v.active].visible=!1,v.active+=1,v.active%=v.children.length,v.children[v.active].visible=!0},{spr:"arrow",x:c.x+c.data.arrowX+c.data.arrowGap/2,y:c.y+c.data.arrowY}),f=new r.Button(function(){v.children[v.active].visible=!1,v.active-=1,v.active<0&&(v.active+=v.children.length),v.children[v.active].visible=!0},{spr:"arrow_flipped",x:c.x+c.data.arrowX-c.data.arrowGap/2,y:c.y+c.data.arrowY});p.addChild(h.spr),p.addChild(f.spr),I.push(h.spr,f.spr)}else if("filter"===c.type){var m=y.filters.length;y.filters.push(null);var w=c.data.shaders;D(m,w[0].fragment,w[0].uniforms);var g=new r.Button(function(){v.active+=1,v.active%=w.length,D(m,w[v.active].fragment,w[v.active].uniforms)},{spr:"arrow",x:c.x+c.data.arrowX+c.data.arrowGap/2,y:c.y+c.data.arrowY}),x=new r.Button(function(){v.active-=1,v.active<0&&(v.active+=w.length),D(m,w[v.active].fragment,w[v.active].uniforms)},{spr:"arrow_flipped",x:c.x+c.data.arrowX-c.data.arrowGap/2,y:c.y+c.data.arrowY});p.addChild(g.spr),p.addChild(x.spr),I.push(g.spr,x.spr)}return e[l]=v,y.addChild(v),e},{});var v=new r.Button(A,{spr:"save",x:.95,y:.95});v.spr.anchor.x=v.spr.anchor.y=1,I.push(v.spr),p.addChild(v.spr),y.addChild(p),y.addChild(f.spr),e.Ticker.shared.add(L);var b=e.Loader.shared.resources.bgm.data;b.loop(!0);var h=b.play();b.fade(0,.75,2e3,h)}function L(){q(),k()}function q(){n.ItemDraggable.updateAll(e.Ticker.shared.lastTime),f.selected=!1,f.up.visible=!1,f.over.visible=!1,f.down.visible=!1,a.mouse.isDown()&&t.Interactive.target?(f.drag(),f.down.visible=!0):t.Interactive.target?f.over.visible=!0:f.up.visible=!0,w.bad_clothes.children.forEach(function(e){x=!!E(e.x,e.y,w.gender.x,w.gender.y)}),g>=8&&(C=!0,w.gender.visible=!1,w.undies.visible=!1,M(),g=0),a.mouse.isJustDown()&&t.Interactive.target&&(!0===t.Interactive.target.bad&&!1===C&&(x=!0,g+=1,e.Loader.shared.resources.error.data.play()),M()),f.v.x=a.mouse.pos.x-f.spr.x,f.v.y=a.mouse.pos.y-f.spr.y,f.angle=0,f.update(e.Ticker.shared.lastTime),f.spr.x=a.mouse.pos.x,f.spr.y=a.mouse.pos.y,a.mouse.update(),y.filters.forEach(function(r){r.uniforms.time=e.Ticker.shared.lastTime,r.uniforms.mouse=[a.mouse.pos.x/l.size.x,a.mouse.pos.y/l.size.y]})}function E(e,r,a,t){return Math.abs(a-e)<250&&Math.abs(t-r)<250}function M(){!0===C?(w.bubble.children[w.bubble.active].visible=!1,w.bubble.active=Math.floor(1*Math.random()+7),w.bubble.children[w.bubble.active].visible=!0):!0===x?(w.bubble.children[w.bubble.active].visible=!1,w.bubble.active=Math.floor(3*Math.random()+4),w.bubble.children[w.bubble.active].visible=!0):(w.bubble.children[w.bubble.active].visible=!1,w.bubble.active=Math.floor(4*Math.random()),w.bubble.children[w.bubble.active].visible=!0)}function k(){m.render(y,null,!0)}function A(){I.forEach(function(e){e.visible=!1}),m.preserveDrawingBuffer=!0,k(),m.preserveDrawingBuffer=!1,I.forEach(function(e){e.visible=!0});var e=m.view.toDataURL(),r=document.createElement("a");document.body.append(r),r.download="my outfit",r.href=e,r.click(),r.remove()}window.stage||(window.stage=y);
},{"pixi.js":"aQiP","./Button":"hBTp","./input-mouse":"z7qd","./Interactive":"kw9d","./ItemAnimated":"wkQh","./ItemDraggable":"pEBc","./ItemStatic":"OADo","./Layer":"KuvC","./loader":"HWcF","./size":"Oe2F"}]},{},[], null)